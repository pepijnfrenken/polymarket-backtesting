from __future__ import annotations

from typing import TYPE_CHECKING, Protocol, runtime_checkable

if TYPE_CHECKING:
    import pandas as pd


@runtime_checkable
class PriceCacheProtocol(Protocol):
    def save_bars(self, token_id: str, df: pd.DataFrame) -> None: ...
    def load_bars(self, token_id: str) -> pd.DataFrame | None: ...
    def has_bars(self, token_id: str) -> bool: ...
    def delete_bars(self, token_id: str) -> None: ...


@runtime_checkable
class MetadataCacheProtocol(Protocol):
    def save_fetch_info(self, token_id: str, start_ts: int, end_ts: int) -> None: ...
    def load_fetch_info(self, token_id: str) -> dict[str, int] | None: ...
    def save_market(self, market_id: str, data: dict) -> None: ...
    def load_market(self, market_id: str) -> dict | None: ...
